# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–ï–î–ü–†–û–°–ú–û–¢–†–ê - 2 –Ω–æ—è–±—Ä—è 2025

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å—Å—ã–ª–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (–∂–∏—Ä–Ω—ã–π, –∫—É—Ä—Å–∏–≤, —Å—Å—ã–ª–∫–∏) —Ç–µ—Ä—è–ª–æ—Å—å –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ –∫–Ω–æ–ø–∫–∏
- Entities (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ) —É–∫–∞–∑—ã–≤–∞–ª–∏ –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ—Å–ª–µ –æ–±—Ä–µ–∑–∫–∏ —Ç–µ–∫—Å—Ç–∞

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
1. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ entities** –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ —Ñ–æ—Ä–º–∞—Ç–∞ —Å –∫–Ω–æ–ø–∫–æ–π
2. **–ü–µ—Ä–µ—Å—á—ë—Ç –ø–æ–∑–∏—Ü–∏–π —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** –¥–ª—è –æ–±—Ä–µ–∑–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
3. **–†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∏ —Ñ–æ—Ç–æ —Ä–∞—Å—Å—ã–ª–æ–∫**

---

## üì¶ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π:

### –ù–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:
```bash
git add bot.py FIX_PREVIEW.md
git commit -m "Fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å—Å—ã–ª–∫–∏ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º"
git push origin main
```

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
ssh root@5.129.250.86
cd /opt/tusabot
sudo systemctl stop tusabot
git pull origin main
sudo systemctl start tusabot
sudo journalctl -u tusabot -f
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞:

### –¢–µ—Å—Ç 1: –¢–µ–∫—Å—Ç —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ë–ï–ó –∫–Ω–æ–ø–∫–∏
1. `/admin` ‚Üí "üìù –¢–µ–∫—Å—Ç–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞"
2. –û—Ç–ø—Ä–∞–≤—å: **–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç** –∏ *–∫—É—Ä—Å–∏–≤* (–∏—Å–ø–æ–ª—å–∑—É–π Ctrl+B –∏ Ctrl+I)
3. –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
4. –ù–∞–∂–º–∏ "‚úÖ –î–∞, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å"

### –¢–µ—Å—Ç 2: –¢–µ–∫—Å—Ç —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ò –∫–Ω–æ–ø–∫–æ–π
1. `/admin` ‚Üí "üìù –¢–µ–∫—Å—Ç–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞"
2. –û—Ç–ø—Ä–∞–≤—å: **–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç** | –ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç | https://example.com
3. –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å:
   - –¢–æ–ª—å–∫–æ "**–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç**" (—Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
   - –ö–Ω–æ–ø–∫—É "–ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç"
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏ –æ—Ç–ø—Ä–∞–≤–∫—É

### –¢–µ—Å—Ç 3: –§–æ—Ç–æ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ caption
1. `/admin` ‚Üí "üìù –¢–µ–∫—Å—Ç–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞"
2. –û—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ —Å –ø–æ–¥–ø–∏—Å—å—é: **–ù–æ–≤–∞—è –≤–µ—á–µ—Ä–∏–Ω–∫–∞!** *–ù–µ –ø—Ä–æ–ø—É—Å—Ç–∏*
3. –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ç–æ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏

### –¢–µ—Å—Ç 4: –§–æ—Ç–æ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ò –∫–Ω–æ–ø–∫–æ–π
1. `/admin` ‚Üí "üìù –¢–µ–∫—Å—Ç–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞"
2. –û—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ —Å –ø–æ–¥–ø–∏—Å—å—é: **–í–µ—á–µ—Ä–∏–Ω–∫–∞ 5 –Ω–æ—è–±—Ä—è** | –ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç | https://example.com
3. –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä: —Ñ–æ—Ç–æ + —Ç–µ–∫—Å—Ç —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º + –∫–Ω–æ–ø–∫–∞
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏

---

## üîç –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ:

### –î–æ (–Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ):
```python
text_content = update.message.text
entities = update.message.entities  # Entities –¥–ª—è –í–°–ï–ì–û —Ç–µ–∫—Å—Ç–∞

if " | " in text_content:
    text_content = parts[0].strip()  # –û–±—Ä–µ–∑–∞–ª–∏ —Ç–µ–∫—Å—Ç
    # –ù–û entities –æ—Å—Ç–∞–ª–∏—Å—å –¥–ª—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞!
```

### –ü–æ—Å–ª–µ (—Ä–∞–±–æ—Ç–∞–µ—Ç):
```python
original_text = update.message.text
original_entities = update.message.entities

if " | " in original_text:
    text_content = parts[0].strip()
    
    # –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º entities –¥–ª—è –æ–±—Ä–µ–∑–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
    text_length = len(text_content)
    adjusted_entities = []
    for entity in original_entities:
        if entity.offset < text_length:
            # –û–±—Ä–µ–∑–∞–µ–º entity –µ—Å–ª–∏ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª—ã
            adjusted_entities.append(entity)
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!
–¢–µ–ø–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö! üéâ
